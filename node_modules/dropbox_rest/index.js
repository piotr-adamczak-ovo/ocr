var fs = require('fs'),
	express = require('express'),
	request = require('request'),
	url = require('url');


// insert your app key and secret here
var APP_KEY = 'mbwfmlzklm1fi1d';
var APP_SECRET = 'giazksdcfzo8u9g';
var TOKEN = 'U-gkZ4IiscEAAAAAAAA0jtUVl1ae_SzolJUMYz3kuA4DgAlOwfPXrs5NgRXY8tH8';

exports.uploadFileToDropbox = function(image,filename, callback) {
var serverpath;//file to be save at what path in server
var localpath;//path of the file which is to be uploaded

fs.readFile(image, function read(err, data) {
        if (err) {
            throw err;
        }
        content = data;
        fileupload(filename,content, callback);
    });
}

function fileupload(path, content, callback){
    request.put('https://api-content.dropbox.com/1/files_put/auto/'+path, {
    headers: { Authorization: 'Bearer ' + TOKEN ,  'Content-Type': 'text/plain'
    },body:content}, function optionalCallback (err, httpResponse, bodymsg) {
    if (err) {
        callback(err, null);
    }
    else
    { 
        callback(null, bodymsg);
    }
});
}